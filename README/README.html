<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Mecanim Event System</title>
</head>
<body>

<h2>Overview</h2>
<p>
Mecanim Event System позволяет подписываться на событие, оповещающее о смене состояния анимационного контроллера. Реализация основана на парсинге .controller файла и генерации списка состояний со всей необходимой информацией для отслеживания их смены. <br />
Основные модули:
<ul>
<li>MesParser - отвечает за парсинг .controller файла</li>
<li>MesStateData - структура для хранения данных о состоянии</li>
<li>MesEntity - Monobehaviour через который сериализуется информация о контроллере и осуществляется подписка на смену состояний</li>
</ul>
</p>

<h2>Пример использования</h2>
<p>
1. Назначаем MesEntity на GameObject. Animator при этом должен находиться либо на этом же GameObject, либо на объекте ниже по иерархии. Если вы рассчитываете инстанциировать объект с Animator'ом в рантайме - необходимо назначить в переменную OverrideController ссылку на анимационный контроллер.<br />
2. Нажимаем кнопку Update компонента<br />
3. В необходимых скриптах подписываемся на OnStateChanged(string oldState, string newState)<br />
4. ?????<br />
5. PROFIT!<br />
<img src="screen.png">
</p>

<h2>Возможные проблемы</h2>
<p>
1. Лучше нажимать Update, предварительно вытащив GameObject на сцену, так как в Project может не сработать GetComponentInChildren<br />
2. Если вы удаляете стэйт из контроллера - он не удаляется (sic!). Поэтому парсер будет все равно его считывать. В принципе это абсолютно не критично.
</p>

</body>
</html>